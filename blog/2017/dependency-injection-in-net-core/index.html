<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Dependency Injection in .NET Core - Karam.io</title><meta name="gridsome:hash" content="6fe372bab11d0fceef4dd394fd3b9f44e24d1db3"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="I like writing code &amp; playing football. I&#x27;m terrible at both."><meta data-vue-tag="ssr" name="description" content="I think it&#x27;s safe to say that there&#x27;s a lot of hype around .NET Core nowadays because of it being cross-platform, open source, etc, which isn&#x27;t really something we&#x27;ve been used to from Microsoft technologies over the years. So as someone who works in a predominantly .NET dominated environment, I wanted to dedicate some time playing around with it, building a simple API &amp; just investigating how different it is to the regular .NET Framework."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.fcfd982a4fc064582a158198eac8650c.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.fcfd982a4fc064582a158198eac8650c.png"><link rel="preload" href="/assets/css/0.styles.7e3a9afe.css" as="style"><link rel="preload" href="/assets/js/app.24c85096.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.4ba5e1d2.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.d1a22b1b.js"><link rel="prefetch" href="/assets/js/page--src--pages--about-vue.b755caf4.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.9160a3aa.js"><link rel="prefetch" href="/assets/js/page--src--pages--reading-vue.06d29e12.js"><link rel="prefetch" href="/assets/js/page--src--pages--speaking-vue.ad8cd608.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.5abffd0b.js"><link rel="stylesheet" href="/assets/css/0.styles.7e3a9afe.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text"> ‚Üê Karam.io </span></a></div><div class="header__right"><div class="header__right__menu"><a href="/about/">About</a><a href="/reading/">Reading</a><a href="/speaking/">Speaking</a></div><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      Dependency Injection in .NET Core
    </h1><div class="post-meta">11 March 2017 - 6 mins</div></div><div class="post content-box__post"><div class="post__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 574' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-25e4f0429930b80edeb5ea6a4924f094'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-25e4f0429930b80edeb5ea6a4924f094)' width='860' height='574' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAArAEADASIAAhEBAxEB/8QAGgAAAgMBAQAAAAAAAAAAAAAABgcDBAUIAv/EADAQAAIBAwIEBQMEAgMAAAAAAAECAwQFEQAGEiExQQcTIlFhCBRxIzJCgSRSscHR/8QAGAEAAwEBAAAAAAAAAAAAAAAAAgMEAQX/xAAhEQACAgICAQUAAAAAAAAAAAABAgARAyESMRMiQVGh8f/aAAwDAQACEQMRAD8AVNRN9pTLDAAJ5B1H8Rpv/S/BAm6K55kDVApgIyeZGW5n/jSWpx59U8mOROB%2bNGW1brcNs3SmuVCGimjPLjUhXB6g/B0Ga3FCUKKnYc01VJcfLjiiFGsXF5pf1%2bZn9vDjpjvnSV8eWE1ytksiIs6gx5A5suc6qz%2bLzVHBIlFOlSesavlWP566Etz1F7vdelwuNOwMnoiiU54f61LjTKz2RCpVAjq8HdpUlFY6a8VMSyVtSvHGWGfKTtj5Pvow3baLffrHPR3FYmjcEI7EZRvcHsdAvhDulK%2bwU9qmmEFfRoYuB%2brKOjD3x3HxpOeIexd4y1VVW3a409TQQuz8X3fIJnPJTjhzrWyhQVOpq4i7Xch8hqC51tjqwplpZGRG/wBgNC%2b4aEDi9I1gfcCmlFVb52YrzGHLA68PutZkMd0pOF88pIemPlT/ANatx5NUYDpW4%2b/ps2NRVtuk3Dcolmk8wx0yuMhcdWx750475RUN3t9TTiCmqYYmMTgAEKR1HwRpHfTzv%2blscU%2b37vKsKGUvBI5wvPqpPb306L5uGz2y3TVTXCkiRyXIRxlie%2bB1Oubl7IPd/kYt3ftERDY4bNvyopWH6KRmaFXPQH/zU9VcKp92UdPHAj0iAtxAElsjGfbHzrEvN2qtybrlrqCOaRj6IURCzFR8Dtq9VVN5tryVdxtFTAroEWR1YKuNWox8YRjRgMPVYFwbqLJe6PxDhuaXB3qIaoT06REsXB6IV5ADHI/3oq8T49wzWamfc88cNJUTAJCoAVMA88Dp1HMnWr4Qk1m8JampxKyRFlLdiTjI/GiH6jknO27WaagM9MKkmWZQf0/TgAnoM578uWp2I8gUCP5ltn61ORdz0otl5ZaaU8DDiBDa9LKa23s0qjzU/kOXENWN3U9L9/8A4KFW/a6kEYOo4IzDa3U9znVAiaomEVapHBVRrlDgPjsffV2km8wx8yR8nWXaJXZeBmJUjBBPXU9D6K11XkqtyHtpj/MWpnYPg1tyjoNkUVYsamsrk86SXHPBPJQfYDRk1NRXC3PEyLPA/EjI69eeCMHQz4KTSTeG9oMjFuESIM9gHOBo1l5HI6gamZFrkZhYg1OUrpPNsjflelrb00sxVVboUPPhOjiLxstq25oqi11DysnC0J4WRvcc%2bo0qN01EtTui8SzuXkaqkyx78zrAkJaQAnkTjRDGHAJ7juValzcsMe5auoulHaaS2wxH0Q06cIf3PydAt14Fpii4x1GmDXTyQwCOJyqKMADtpZbjJWslCnAODj86dwCgVALE9z//2Q==' /%3e%3c/svg%3e" width="860" data-src="/assets/static/emin-baycan-LV1CxYBgXqU-unsplash.07cc2b7.497401f6c7385197854952368075c244.jpg" data-srcset="/assets/static/emin-baycan-LV1CxYBgXqU-unsplash.a67b0b2.497401f6c7385197854952368075c244.jpg 480w, /assets/static/emin-baycan-LV1CxYBgXqU-unsplash.07cc2b7.497401f6c7385197854952368075c244.jpg 860w" data-sizes="(max-width: 860px) 100vw, 860px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/emin-baycan-LV1CxYBgXqU-unsplash.07cc2b7.497401f6c7385197854952368075c244.jpg" class="g-image g-image--loaded" width="860" alt="Cover image"></noscript><div class="post__header-credits">
        Image credits: <span><a href='https://unsplash.com/@aimlesscode'>Emin BAYCAN</a></span></div></div><div class="post__content"><p>I think it's safe to say that there's a lot of hype around .NET Core nowadays because of it being cross-platform, open source, etc, which isn't really something we've been used to from Microsoft technologies over the years. So as someone who works in a predominantly .NET dominated environment, I wanted to dedicate some time playing around with it, building a simple API &#x26; just investigating how different it is to the regular .NET Framework.</p>
<p>One of the more intriguing perks of .NET Core that sparked my interest was its built in Dependency Injection which I'd assume is a concept most software developers are somewhat acquainted with. If you don't know what Dependency Injection is, it is a way of passing a classes external dependencies without having to instantiate the dependency every single time an instance of the base class is used. It has many useful uses, but one of my favourite is probably the fact that it makes mocking &#x26; testing classes a lot easier as well as helps overall with decoupling.</p>
<p>Here's a quick example scenario, which should hopefully explain this:</p>
<ul>
<li>Imagine we have a <code class="language-text">UserService</code> class, containing logic related to Users and a <code class="language-text">UserRepository</code> class that talks to a database.</li>
<li>A level above that, we also have a <code class="language-text">UserController</code> class, which in an API project for example could contain methods that are mapped to <code class="language-text">GET</code> or <code class="language-text">POST</code> routes which could then allow your Angular, React or Vue front-end to call them or pass data to them to be executed.</li>
<li>If a user is attempting to log in via our API, they will first hit a route defined within our <code class="language-text">UserController</code> which would then require the <code class="language-text">UserService</code> to work its magic and talk to a database somewhere via the <code class="language-text">UserRepository</code>, compare password hashes &#x26; eventually return whether or not the user has indeed successfully managed to login successfully or not.</li>
<li>Given that our <code class="language-text">UserService</code> talks to a separate class which is the <code class="language-text">UserRepository</code>, you'd probably normally do something like this simplified example:</li>
</ul>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span>
<span class="token punctuation">{</span>
    <span class="token class-name">UserRepository</span> repository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">UserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        repository <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">User</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> username<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> repository<span class="token punctuation">.</span><span class="token function">GetUser</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<ul>
<li>So let's say we now decide that we want to write some unit tests around our <code class="language-text">UserService</code> but because of the nature of tests, we don't actually want our tests to force the <code class="language-text">UserRepository</code> to talk to or play around with the database in any way shape or form. For logging in, this scenario isn't too bad. But imagine you're testing registering a new user... what do you want to do, create a new user object in the database every time you run your unit tests? This would cause chaos!</li>
<li>A suitable solution would be to obviously mock out our <code class="language-text">UserRepository</code>, so that when we Unit Test the <code class="language-text">UserService</code>, we use a mocked out <code class="language-text">UserRepository</code> where we can define what it should return when we pretend to call the <code class="language-text">GetUser()</code> method and allow us to test our <code class="language-text">UserService</code> in isolation. But we don't really want to mock out the <code class="language-text">UserRepository</code> within the <code class="language-text">UserService</code>code because then we're modifying our production code... this is where Dependency Injection becomes your best friend.</li>
</ul>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span>
<span class="token punctuation">{</span>
    <span class="token class-name">IUserRepository</span> _repository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> UserService <span class="token punctuation">(</span><span class="token class-name">IUserRepository</span> repository<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _repository <span class="token operator">=</span> repository<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">User</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> username<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> _repository<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<ul>
<li>We have now applied Dependency Injection to our <code class="language-text">UserService</code> class. Instead of instantiating our <code class="language-text">UserRepository</code> within the constructor of our <code class="language-text">UserService</code>, we've declared an interface of it at the top of the class and assigned it to the dependency passed in via the constructor parameters and due to the magic of dependency injection, regardless of whether you're using a framework like Spring, the built in .NET Core dependency injection or something like Castle Windsor to handle it for you, every time the <code class="language-text">UserService</code> is being used, it will always have access to a usable instance of the <code class="language-text">UserRepository</code> and the functions inside.</li>
</ul>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GivenUserService</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Test</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ThisIsATerribleTestLol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">User</span> exampleUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">User</span> <span class="token punctuation">{</span>
        userid <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        username <span class="token operator">=</span> <span class="token string">"Bill Gates"</span><span class="token punctuation">,</span>
        password <span class="token operator">=</span> <span class="token string">"somehashedstuff"</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Arrange</span>
        <span class="token class-name"><span class="token keyword">var</span></span> repository <span class="token operator">=</span> Substitute<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IUserRepository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserService</span><span class="token punctuation">(</span>repository<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Act</span>
        <span class="token class-name"><span class="token keyword">var</span></span> loggedUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">Login</span><span class="token punctuation">(</span><span class="token string">"Bill Gates"</span><span class="token punctuation">,</span> <span class="token string">"somehashedstuff"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Returns</span><span class="token punctuation">(</span>exampleUser<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Assert</span>
        Assert<span class="token punctuation">.</span><span class="token function">That</span><span class="token punctuation">(</span>exampleUser<span class="token punctuation">,</span> Is<span class="token punctuation">.</span><span class="token function">EqualTo</span><span class="token punctuation">(</span>loggedUser<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<ul>
<li>Within our tests, we can use a mocking framework to mock out the <code class="language-text">UserRepository</code> based on an interface of the <code class="language-text">UserRepository</code>, called <code class="language-text">IUserRepository</code>. This now means that our mocking framework within our unit tests will now be able to mock out an <code class="language-text">IUserRepository</code> and pass it to our <code class="language-text">UserService</code>'s constructor when testing it. Allowing the <code class="language-text">UserService</code> to run and thus be tested in isolation without actually hitting the database through the real <code class="language-text">UserRepository</code>.</li>
<li>Now, not only is our production code looking much better with reduced coupling, but we can also test our code in a much easier, more isolated fashion.</li>
<li>The above test doesn't really test anything as it is just to showcase how the use of Dependency Injection makes life easier for us in terms of testing. In a real scenario, the <code class="language-text">UserService</code> would more than likely contain more logic within the <code class="language-text">Login()</code> method we are testing against.</li>
</ul>
<p>Back on topic, normally we tend to use Castle Windsor to handle Dependency Injection at work because of the perks that come with it being a full fledged IoC container. But what intrigued me about .NET Core's built in Dependency Injection was the claim that it was packaged with the framework. Whilst in older versions you would have to manually set up and configure the Dependency Injection yourself - which nowadays just means wasting time with the number of packages out there that do it for you - it apparently could be done in .NET Core with a few lines the same way something like Castle Windsor allows you to do once set up.</p>
<p>So, to do this all you have to do is simply navigate to your .NET Core project's <code class="language-text">Startup.cs</code> file and add the following under the <code class="language-text">ConfigureServices(IServiceCollection services)</code> method:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  services<span class="token punctuation">.</span><span class="token function">AddMvc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">RabbitRepository</span> _rabbitRepository <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RabbitRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddTransient</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IUserRepository<span class="token punctuation">,</span> UserRepository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDogRepository<span class="token punctuation">,</span> DogRepository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICatRepository<span class="token punctuation">,</span> CatRepository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRabbitRepository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>_rabbitRepository<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>The <code class="language-text">AddTransient()</code> method creates a brand new instance of the <code class="language-text">UserRepository()</code> each and every single time it is requested, even if requested within the same scope, these are great for stateless APIs. This means every time any kind of Service within a project uses a <code class="language-text">UserRepository</code>, it will have a brand new Repository injected to use.</p>
<p>The <code class="language-text">AddScoped()</code> method creates a new instance of the <code class="language-text">DogRepository</code> each time it is requested within different scopes. This means every Service within a project that uses a <code class="language-text">DogRepository</code>, will have its own single <code class="language-text">DogRepository</code> to keep re-using.</p>
<p>The <code class="language-text">AddSingleton()</code> method creates a new instance of the <code class="language-text">CatRepository</code> once and shares the same instance across all different scopes within the application. This means every Service within a project that uses a <code class="language-text">CatRepository</code>, will be injected with and use the same single <code class="language-text">CatRepository</code> object.</p>
<p>The <code class="language-text">AddInstance()</code> method passes a specific instance of an <code class="language-text">IRabbitRepository</code> type object as parameter, meaning each and every time it is requested regardless of scope, that specific <code class="language-text">RabbitService</code> instance that was manually instantiated in the code above, will always be used and shared rather than let the Dependency Injection itself instantiate the object.</p>
<p>And now... breathe! That's it. You have now set up the built in Dependency Injection within .NET Core in your project! Every time you require a dependency, simply register it however you like within your Startup.cs file and then just pop the interface in your constructor as shown above!</p>
</div><div class="post__footer"><div class="post-tags"><a href="/blog/tag/.NET%20Core/" class="post-tags__link"><span>#</span> .NET Core
  </a></div></div></div><div><div class="coffee__container"><h4>Enjoyed this blog post? üòÑ</h4><a href="https://www.buymeacoffee.com/karam" target="_blank"><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee :)&emoji=&slug=karam&button_colour=FFDD00&font_colour=000000&font_family=Comic&outline_colour=000000&coffee_colour=ffffff"></a></div></div><div class="post-comments"><div class="content-box__comments"><div id="disqus_thread" identifier="Dependency Injection in .NET Core" style="min-height:200px;"></div></div></div></main><footer class="footer"><span>Made with
      <span style="color: red"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="heart" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-heart fa-w-16"><path fill="currentColor" d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"></path></svg></span>
      in wet &amp; rainy
      <a href="//en.wikipedia.org/wiki/Lancashire" target="_blank">Lancashire</a>!</span><br><span>¬© Copyright 2021 -
      <a href="//karam.io">Karam.io</a></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Dependency Injection in .NET Core","path":"\u002Fblog\u002F2017\u002Fdependency-injection-in-net-core\u002F","date":"11 March 2017","timeToRead":6,"tags":[{"id":".NET Core","title":".NET Core","path":"\u002Fblog\u002Ftag\u002F.NET%20Core\u002F"}],"description":"I think it's safe to say that there's a lot of hype around .NET Core nowadays because of it being cross-platform, open source, etc, which isn't really something we've been used to from Microsoft technologies over the years. So as someone who works in a predominantly .NET dominated environment, I wanted to dedicate some time playing around with it, building a simple API & just investigating how different it is to the regular .NET Framework.","content":"\u003Cp\u003EI think it's safe to say that there's a lot of hype around .NET Core nowadays because of it being cross-platform, open source, etc, which isn't really something we've been used to from Microsoft technologies over the years. So as someone who works in a predominantly .NET dominated environment, I wanted to dedicate some time playing around with it, building a simple API &#x26; just investigating how different it is to the regular .NET Framework.\u003C\u002Fp\u003E\n\u003Cp\u003EOne of the more intriguing perks of .NET Core that sparked my interest was its built in Dependency Injection which I'd assume is a concept most software developers are somewhat acquainted with. If you don't know what Dependency Injection is, it is a way of passing a classes external dependencies without having to instantiate the dependency every single time an instance of the base class is used. It has many useful uses, but one of my favourite is probably the fact that it makes mocking &#x26; testing classes a lot easier as well as helps overall with decoupling.\u003C\u002Fp\u003E\n\u003Cp\u003EHere's a quick example scenario, which should hopefully explain this:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EImagine we have a \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E class, containing logic related to Users and a \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E class that talks to a database.\u003C\u002Fli\u003E\n\u003Cli\u003EA level above that, we also have a \u003Ccode class=\"language-text\"\u003EUserController\u003C\u002Fcode\u003E class, which in an API project for example could contain methods that are mapped to \u003Ccode class=\"language-text\"\u003EGET\u003C\u002Fcode\u003E or \u003Ccode class=\"language-text\"\u003EPOST\u003C\u002Fcode\u003E routes which could then allow your Angular, React or Vue front-end to call them or pass data to them to be executed.\u003C\u002Fli\u003E\n\u003Cli\u003EIf a user is attempting to log in via our API, they will first hit a route defined within our \u003Ccode class=\"language-text\"\u003EUserController\u003C\u002Fcode\u003E which would then require the \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E to work its magic and talk to a database somewhere via the \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E, compare password hashes &#x26; eventually return whether or not the user has indeed successfully managed to login successfully or not.\u003C\u002Fli\u003E\n\u003Cli\u003EGiven that our \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E talks to a separate class which is the \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E, you'd probably normally do something like this simplified example:\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-csharp\"\u003E\u003Ccode class=\"language-csharp\"\u003E\u003Cspan class=\"token keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EUserService\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token class-name\"\u003EUserRepository\u003C\u002Fspan\u003E repository\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EUserService\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        repository \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token constructor-invocation class-name\"\u003EUserRepository\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"token return-type class-name\"\u003EUser\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ELogin\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token class-name\"\u003E\u003Cspan class=\"token keyword\"\u003Estring\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E username\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003E\u003Cspan class=\"token keyword\"\u003Estring\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E password\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E repository\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EGetUser\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eusername\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E password\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003ESo let's say we now decide that we want to write some unit tests around our \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E but because of the nature of tests, we don't actually want our tests to force the \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E to talk to or play around with the database in any way shape or form. For logging in, this scenario isn't too bad. But imagine you're testing registering a new user... what do you want to do, create a new user object in the database every time you run your unit tests? This would cause chaos!\u003C\u002Fli\u003E\n\u003Cli\u003EA suitable solution would be to obviously mock out our \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E, so that when we Unit Test the \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E, we use a mocked out \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E where we can define what it should return when we pretend to call the \u003Ccode class=\"language-text\"\u003EGetUser()\u003C\u002Fcode\u003E method and allow us to test our \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E in isolation. But we don't really want to mock out the \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E within the \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003Ecode because then we're modifying our production code... this is where Dependency Injection becomes your best friend.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-csharp\"\u003E\u003Ccode class=\"language-csharp\"\u003E\u003Cspan class=\"token keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EUserService\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token class-name\"\u003EIUserRepository\u003C\u002Fspan\u003E _repository\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Epublic\u003C\u002Fspan\u003E UserService \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token class-name\"\u003EIUserRepository\u003C\u002Fspan\u003E repository\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        _repository \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E repository\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"token return-type class-name\"\u003EUser\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ELogin\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token class-name\"\u003E\u003Cspan class=\"token keyword\"\u003Estring\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E username\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003E\u003Cspan class=\"token keyword\"\u003Estring\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E password\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _repository\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetUser\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eusername\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E password\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003EWe have now applied Dependency Injection to our \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E class. Instead of instantiating our \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E within the constructor of our \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E, we've declared an interface of it at the top of the class and assigned it to the dependency passed in via the constructor parameters and due to the magic of dependency injection, regardless of whether you're using a framework like Spring, the built in .NET Core dependency injection or something like Castle Windsor to handle it for you, every time the \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E is being used, it will always have access to a usable instance of the \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E and the functions inside.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-csharp\"\u003E\u003Ccode class=\"language-csharp\"\u003E\u003Cspan class=\"token keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EGivenUserService\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token attribute\"\u003E\u003Cspan class=\"token class-name\"\u003ETest\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"token return-type class-name\"\u003E\u003Cspan class=\"token keyword\"\u003Evoid\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EThisIsATerribleTestLol\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token class-name\"\u003EUser\u003C\u002Fspan\u003E exampleUser \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token constructor-invocation class-name\"\u003EUser\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        userid \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n        username \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Bill Gates\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n        password \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"somehashedstuff\"\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"token comment\"\u003E\u002F\u002F Arrange\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token class-name\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E repository \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Substitute\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token generic-method\"\u003E\u003Cspan class=\"token function\"\u003EFor\u003C\u002Fspan\u003E\u003Cspan class=\"token generic class-name\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EIUserRepository\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token class-name\"\u003EUserService\u003C\u002Fspan\u003E userService \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token constructor-invocation class-name\"\u003EUserService\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Erepository\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"token comment\"\u003E\u002F\u002F Act\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token class-name\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E loggedUser \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E userService\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ELogin\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Bill Gates\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"somehashedstuff\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EReturns\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EexampleUser\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"token comment\"\u003E\u002F\u002F Assert\u003C\u002Fspan\u003E\n        Assert\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EThat\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EexampleUser\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E Is\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EEqualTo\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EloggedUser\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003EWithin our tests, we can use a mocking framework to mock out the \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E based on an interface of the \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E, called \u003Ccode class=\"language-text\"\u003EIUserRepository\u003C\u002Fcode\u003E. This now means that our mocking framework within our unit tests will now be able to mock out an \u003Ccode class=\"language-text\"\u003EIUserRepository\u003C\u002Fcode\u003E and pass it to our \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E's constructor when testing it. Allowing the \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E to run and thus be tested in isolation without actually hitting the database through the real \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003ENow, not only is our production code looking much better with reduced coupling, but we can also test our code in a much easier, more isolated fashion.\u003C\u002Fli\u003E\n\u003Cli\u003EThe above test doesn't really test anything as it is just to showcase how the use of Dependency Injection makes life easier for us in terms of testing. In a real scenario, the \u003Ccode class=\"language-text\"\u003EUserService\u003C\u002Fcode\u003E would more than likely contain more logic within the \u003Ccode class=\"language-text\"\u003ELogin()\u003C\u002Fcode\u003E method we are testing against.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EBack on topic, normally we tend to use Castle Windsor to handle Dependency Injection at work because of the perks that come with it being a full fledged IoC container. But what intrigued me about .NET Core's built in Dependency Injection was the claim that it was packaged with the framework. Whilst in older versions you would have to manually set up and configure the Dependency Injection yourself - which nowadays just means wasting time with the number of packages out there that do it for you - it apparently could be done in .NET Core with a few lines the same way something like Castle Windsor allows you to do once set up.\u003C\u002Fp\u003E\n\u003Cp\u003ESo, to do this all you have to do is simply navigate to your .NET Core project's \u003Ccode class=\"language-text\"\u003EStartup.cs\u003C\u002Fcode\u003E file and add the following under the \u003Ccode class=\"language-text\"\u003EConfigureServices(IServiceCollection services)\u003C\u002Fcode\u003E method:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-csharp\"\u003E\u003Ccode class=\"language-csharp\"\u003E\u003Cspan class=\"token keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"token return-type class-name\"\u003E\u003Cspan class=\"token keyword\"\u003Evoid\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EConfigureServices\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token class-name\"\u003EIServiceCollection\u003C\u002Fspan\u003E services\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  services\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EAddMvc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token class-name\"\u003ERabbitRepository\u003C\u002Fspan\u003E _rabbitRepository \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token constructor-invocation class-name\"\u003ERabbitRepository\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  services\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token generic-method\"\u003E\u003Cspan class=\"token function\"\u003EAddTransient\u003C\u002Fspan\u003E\u003Cspan class=\"token generic class-name\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EIUserRepository\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E UserRepository\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  services\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token generic-method\"\u003E\u003Cspan class=\"token function\"\u003EAddScoped\u003C\u002Fspan\u003E\u003Cspan class=\"token generic class-name\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EIDogRepository\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E DogRepository\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  services\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token generic-method\"\u003E\u003Cspan class=\"token function\"\u003EAddSingleton\u003C\u002Fspan\u003E\u003Cspan class=\"token generic class-name\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EICatRepository\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E CatRepository\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  services\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token generic-method\"\u003E\u003Cspan class=\"token function\"\u003EAddInstance\u003C\u002Fspan\u003E\u003Cspan class=\"token generic class-name\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EIRabbitRepository\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_rabbitRepository\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe \u003Ccode class=\"language-text\"\u003EAddTransient()\u003C\u002Fcode\u003E method creates a brand new instance of the \u003Ccode class=\"language-text\"\u003EUserRepository()\u003C\u002Fcode\u003E each and every single time it is requested, even if requested within the same scope, these are great for stateless APIs. This means every time any kind of Service within a project uses a \u003Ccode class=\"language-text\"\u003EUserRepository\u003C\u002Fcode\u003E, it will have a brand new Repository injected to use.\u003C\u002Fp\u003E\n\u003Cp\u003EThe \u003Ccode class=\"language-text\"\u003EAddScoped()\u003C\u002Fcode\u003E method creates a new instance of the \u003Ccode class=\"language-text\"\u003EDogRepository\u003C\u002Fcode\u003E each time it is requested within different scopes. This means every Service within a project that uses a \u003Ccode class=\"language-text\"\u003EDogRepository\u003C\u002Fcode\u003E, will have its own single \u003Ccode class=\"language-text\"\u003EDogRepository\u003C\u002Fcode\u003E to keep re-using.\u003C\u002Fp\u003E\n\u003Cp\u003EThe \u003Ccode class=\"language-text\"\u003EAddSingleton()\u003C\u002Fcode\u003E method creates a new instance of the \u003Ccode class=\"language-text\"\u003ECatRepository\u003C\u002Fcode\u003E once and shares the same instance across all different scopes within the application. This means every Service within a project that uses a \u003Ccode class=\"language-text\"\u003ECatRepository\u003C\u002Fcode\u003E, will be injected with and use the same single \u003Ccode class=\"language-text\"\u003ECatRepository\u003C\u002Fcode\u003E object.\u003C\u002Fp\u003E\n\u003Cp\u003EThe \u003Ccode class=\"language-text\"\u003EAddInstance()\u003C\u002Fcode\u003E method passes a specific instance of an \u003Ccode class=\"language-text\"\u003EIRabbitRepository\u003C\u002Fcode\u003E type object as parameter, meaning each and every time it is requested regardless of scope, that specific \u003Ccode class=\"language-text\"\u003ERabbitService\u003C\u002Fcode\u003E instance that was manually instantiated in the code above, will always be used and shared rather than let the Dependency Injection itself instantiate the object.\u003C\u002Fp\u003E\n\u003Cp\u003EAnd now... breathe! That's it. You have now set up the built in Dependency Injection within .NET Core in your project! Every time you require a dependency, simply register it however you like within your Startup.cs file and then just pop the interface in your constructor as shown above!\u003C\u002Fp\u003E\n","cover_image":{"type":"image","mimeType":"image\u002Fjpeg","src":"\u002Fassets\u002Fstatic\u002Femin-baycan-LV1CxYBgXqU-unsplash.07cc2b7.497401f6c7385197854952368075c244.jpg","size":{"width":860,"height":574},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["\u002Fassets\u002Fstatic\u002Femin-baycan-LV1CxYBgXqU-unsplash.a67b0b2.497401f6c7385197854952368075c244.jpg 480w","\u002Fassets\u002Fstatic\u002Femin-baycan-LV1CxYBgXqU-unsplash.07cc2b7.497401f6c7385197854952368075c244.jpg 860w"],"dataUri":"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 860 574' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-25e4f0429930b80edeb5ea6a4924f094'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-25e4f0429930b80edeb5ea6a4924f094)' width='860' height='574' xlink:href='data:image\u002Fjpeg%3bbase64%2c\u002F9j\u002F2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj\u002F2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj\u002FwAARCAArAEADASIAAhEBAxEB\u002F8QAGgAAAgMBAQAAAAAAAAAAAAAABgcDBAUIAv\u002FEADAQAAIBAwIEBQMEAgMAAAAAAAECAwQFEQAGEiExQQcTIlFhCBRxIzJCgSRSscHR\u002F8QAGAEAAwEBAAAAAAAAAAAAAAAAAgMEAQX\u002FxAAhEQACAgICAQUAAAAAAAAAAAABAgARAyESMRMiQVGh8f\u002FaAAwDAQACEQMRAD8AVNRN9pTLDAAJ5B1H8Rpv\u002FS\u002FBAm6K55kDVApgIyeZGW5n\u002FjSWpx59U8mOROB%2bNGW1brcNs3SmuVCGimjPLjUhXB6g\u002FB0Ga3FCUKKnYc01VJcfLjiiFGsXF5pf1%2bZn9vDjpjvnSV8eWE1ytksiIs6gx5A5suc6qz%2bLzVHBIlFOlSesavlWP566Etz1F7vdelwuNOwMnoiiU54f61LjTKz2RCpVAjq8HdpUlFY6a8VMSyVtSvHGWGfKTtj5Pvow3baLffrHPR3FYmjcEI7EZRvcHsdAvhDulK%2bwU9qmmEFfRoYuB%2brKOjD3x3HxpOeIexd4y1VVW3a409TQQuz8X3fIJnPJTjhzrWyhQVOpq4i7Xch8hqC51tjqwplpZGRG\u002FwBgNC%2b4aEDi9I1gfcCmlFVb52YrzGHLA68PutZkMd0pOF88pIemPlT\u002FANatx5NUYDpW4%2b\u002Fps2NRVtuk3Dcolmk8wx0yuMhcdWx750475RUN3t9TTiCmqYYmMTgAEKR1HwRpHfTzv%2blscU%2b37vKsKGUvBI5wvPqpPb306L5uGz2y3TVTXCkiRyXIRxlie%2bB1Oubl7IPd\u002FkYt3ftERDY4bNvyopWH6KRmaFXPQH\u002FzU9VcKp92UdPHAj0iAtxAElsjGfbHzrEvN2qtybrlrqCOaRj6IURCzFR8Dtq9VVN5tryVdxtFTAroEWR1YKuNWox8YRjRgMPVYFwbqLJe6PxDhuaXB3qIaoT06REsXB6IV5ADHI\u002F3oq8T49wzWamfc88cNJUTAJCoAVMA88Dp1HMnWr4Qk1m8JampxKyRFlLdiTjI\u002FGiH6jknO27WaagM9MKkmWZQf0\u002FTgAnoM578uWp2I8gUCP5ltn61ORdz0otl5ZaaU8DDiBDa9LKa23s0qjzU\u002FkOXENWN3U9L9\u002F8A4KFW\u002Fa6kEYOo4IzDa3U9znVAiaomEVapHBVRrlDgPjsffV2km8wx8yR8nWXaJXZeBmJUjBBPXU9D6K11XkqtyHtpj\u002FMWpnYPg1tyjoNkUVYsamsrk86SXHPBPJQfYDRk1NRXC3PEyLPA\u002FEjI69eeCMHQz4KTSTeG9oMjFuESIM9gHOBo1l5HI6gamZFrkZhYg1OUrpPNsjflelrb00sxVVboUPPhOjiLxstq25oqi11DysnC0J4WRvcc%2bo0qN01EtTui8SzuXkaqkyx78zrAkJaQAnkTjRDGHAJ7juValzcsMe5auoulHaaS2wxH0Q06cIf3PydAt14Fpii4x1GmDXTyQwCOJyqKMADtpZbjJWslCnAODj86dwCgVALE9z\u002F\u002F2Q==' \u002F%3e%3c\u002Fsvg%3e"},"cover_image_credits":"\u003Ca href='https:\u002F\u002Funsplash.com\u002F@aimlesscode'\u003EEmin BAYCAN\u003C\u002Fa\u003E"}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.24c85096.js" defer></script><script src="/assets/js/page--src--templates--post-vue.4ba5e1d2.js" defer></script>
  </body>
</html>